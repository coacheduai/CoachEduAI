
{% extends "base.html" %}

{% block title %}Tạo Nhóm - CoachEduAI{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-lg-6">
            <div class="card shadow">
                <div class="card-header bg-info text-white">
                    <h4 class="mb-0">
                        <i class="fas fa-users-cog me-2"></i>
                        Tạo Nhóm Mới
                    </h4>
                </div>
                <div class="card-body">
                    <form method="POST">
                        <div class="mb-3">
                            <label for="name" class="form-label">Tên nhóm *</label>
                            <input type="text" class="form-control" id="name" name="name" required 
                                   placeholder="Ví dụ: Nhóm học Toán 12">
                        </div>

                        <div class="mb-3">
                            <label for="description" class="form-label">Mô tả nhóm</label>
                            <textarea class="form-control" id="description" name="description" rows="4"
                                      placeholder="Mô tả về mục đích, quy tắc và hoạt động của nhóm..."></textarea>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Loại nhóm</label>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="privacy_type" id="public_group" value="public" checked>
                                <label class="form-check-label" for="public_group">
                                    <i class="fas fa-globe text-success me-2"></i>
                                    <strong>Công khai</strong>
                                    <small class="text-muted d-block">Mọi người có thể tìm thấy và tham gia nhóm</small>
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="privacy_type" id="private_group" value="private">
                                <label class="form-check-label" for="private_group">
                                    <i class="fas fa-lock text-warning me-2"></i>
                                    <strong>Riêng tư</strong>
                                    <small class="text-muted d-block">Cần phê duyệt từ chủ nhóm mới có thể tham gia</small>
                                </label>
                            </div>
                        </div>

                        <div id="private_options" style="display: none;">
                            <div class="alert alert-warning">
                                <i class="fas fa-info-circle me-2"></i>
                                <strong>Lưu ý cho nhóm riêng tư:</strong>
                                <ul class="mb-0 mt-2">
                                    <li>Bạn sẽ cần phê duyệt từng yêu cầu tham gia</li>
                                    <li>Nhóm sẽ không hiển thị trong tìm kiếm công khai</li>
                                    <li>Chỉ thành viên được mời mới có thể tham gia</li>
                                </ul>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Quy tắc nhóm (tùy chọn)</label>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="rule_respectful">
                                <label class="form-check-label" for="rule_respectful">
                                    Tôn trọng lẫn nhau
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="rule_helpful">
                                <label class="form-check-label" for="rule_helpful">
                                    Hỗ trợ và giúp đỡ nhau học tập
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="rule_no_spam">
                                <label class="form-check-label" for="rule_no_spam">
                                    Không spam hoặc quảng cáo
                                </label>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="max_members" class="form-label">Số thành viên tối đa</label>
                            <select class="form-select" id="max_members" name="max_members">
                                <option value="50">50 thành viên</option>
                                <option value="100" selected>100 thành viên</option>
                                <option value="200">200 thành viên</option>
                                <option value="500">500 thành viên</option>
                                <option value="unlimited">Không giới hạn</option>
                            </select>
                        </div>

                        <div class="alert alert-info">
                            <i class="fas fa-lightbulb me-2"></i>
                            <strong>Gợi ý:</strong> Hãy tạo tên nhóm rõ ràng và mô tả chi tiết để thu hút đúng đối tượng tham gia.
                        </div>

                        <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                            <a href="{{ url_for('groups') }}" class="btn btn-outline-secondary">
                                <i class="fas fa-times me-2"></i>Hủy
                            </a>
                            <button type="submit" class="btn btn-info">
                                <i class="fas fa-save me-2"></i>Tạo nhóm
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Show/hide private group options
document.querySelectorAll('input[name="privacy_type"]').forEach(radio => {
    radio.addEventListener('change', function() {
        const privateOptions = document.getElementById('private_options');
        if (this.value === 'private') {
            privateOptions.style.display = 'block';
        } else {
            privateOptions.style.display = 'none';
        }
    });
});

// Character counter for description
const descriptionField = document.getElementById('description');
const counter = document.createElement('small');
counter.className = 'text-muted float-end';
counter.textContent = '0/500 ký tự';
descriptionField.parentNode.appendChild(counter);

descriptionField.addEventListener('input', function() {
    const length = this.value.length;
    counter.textContent = `${length}/500 ký tự`;
    
    if (length > 450) {
        counter.classList.add('text-warning');
    } else {
        counter.classList.remove('text-warning');
    }
});
</script>
{% endblock %}
